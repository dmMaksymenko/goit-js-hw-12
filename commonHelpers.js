import{S as $,a as k,i as f}from"./assets/vendor-da186403.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function c(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=c(o);fetch(o.href,s)}})();document.addEventListener("DOMContentLoaded",function(){const p=document.querySelector(".search-form"),n=document.querySelector(".gallery"),c=document.querySelector(".search-btn"),a=document.querySelector(".loader"),o="gallery-link",s=document.querySelector(".load-more-btn");let l;c.disabled=!0;let i=1,g=null,y=0;p.elements.query.addEventListener("input",function(){g=this.value.trim(),c.disabled=g===""}),p.addEventListener("submit",async function(e){if(e.preventDefault(),g=e.target.elements.query.value.trim(),g!==""){p.reset(),i=1,n.innerHTML="";try{console.log("Fetching images...");const{data:t,maxPage:r}=await L(g,1);console.log("Images fetched."),console.log("Data received:",t),console.log("Max page:",r),y=t.totalHits,console.log("Total result:",y),a.style.display="none",E(t.hits),c.disabled=!0,w(r,i),console.log("Checking button status..."),l=new $(`.${o}`,{captionsData:"alt",captionDelay:250}),l.refresh(),l.on("show.simplelightbox")}catch(t){console.error("Error fetching images:",t),a.style.display="none",v(`Error fetching images: ${t}`),c.disabled=!1}finally{e.target.elements.query.value=""}}});async function L(e,t=1){const r="https://pixabay.com/api/",u=new URLSearchParams({key:"42137546-386b5be41212ccd429cab5a80",q:e,image_type:"photo",orientation:"horizontal",safeSearch:!0,per_page:15,page:t}),m=`?${u}`,b=r+m;try{const d=await k.get(b,{params:{...u}});if(!d.data)throw new Error("No data returned from the API");const h=d.data,P=Math.ceil(h.totalHits/u.get("per_page"));return console.log(h),console.log(P),console.log(h.hits.length),{data:h,maxPage:P,page:t}}catch(d){throw new Error(`Error fetching images: ${d.message}`)}}function w(e,t){if(console.log("Max page:",e),console.log("Page:",t),y===0){s.style.display="none";return}t<=e?s.style.display="block":(s.style.display="none",f.show({message:"We're sorry, but you've reached the end of search results.",color:"red",position:"topRight"}))}s.addEventListener("click",M);function S({webformatURL:e,largeImageURL:t,tags:r,likes:u,views:m,comments:b,downloads:d}){return`
  <a href="${t}" class="${o} id="gallery-link">
     <figure>
      <img src="${e}" alt="${r}" class="gallery-image">
      <figcaption class="gallery__figcaption">
        <p class="image-item">Likes <span class="image-caption">${u}</span></p>
        <p class="image-item">Views <span class="image-caption">${m}</span></p>
        <p class="image-item">Comments <span class="image-caption">${b}</span></p>
        <p class="image-item">Downloads <span class="image-caption">${d}</span></p>
  </figcaption>
  </figure>
</a>`}function q(e){return e.map(S).join("")}function E(e){if(e.length===0){f.show({icon:"icon-close",messageSize:"16px",backgroundColor:"red",position:"topRight",message:"Sorry, there are no images matching your search query. Please try again!"}),s.style.display="none",n.innerHTML="";return}const t=q(e);try{n.insertAdjacentHTML("beforeend",t),y+=e.length}finally{a.style.display="none"}}async function M(){console.log("Loading more images..."),i++,a.style.display="block";try{const{data:e,maxPage:t}=await L(g,i);console.log("More images loaded."),console.log("Data received:",e),console.log("Max page:",t),E(e.hits),console.log("Page:",i),console.log("Total hits:",e.totalHits),i>=t||e.totalHits<15?(s.style.display="none",console.log("Reached last page."),f.show({message:"We're sorry, but you've reached the end of search results.",color:"red",position:"topRight"})):(w(t,i),console.log("Checking button status..."));const r=document.querySelectorAll(".gallery-link"),m=(r.length>0?r[0].offsetHeight:0)*2;window.scrollBy({behavior:"smooth",top:m})}catch(e){console.error("Error fetching more images:",e),v(`Error fetching more images: ${e}`)}finally{a.style.display="none"}}function v(e){f.show({message:e,backgroundColor:"#59A10D",progressBarColor:"#B5EA7C",icon:"icon-check"})}});
//# sourceMappingURL=commonHelpers.js.map
